<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style>
			*{padding: 0;margin: 0;}
			div {width: 200px;height: 200px;background-color: red;position: absolute;}
		</style>
		<script>
			window.onload=function(){
				var oDiv=document.getElementById('div1');
				oDiv.onmousedown=function(ev){
					
						var oEv=ev||event;
						var disX=oEv.clientX-oDiv.offsetLeft;
						var disY=oEv.clientY-oDiv.offsetTop;
						
					document.onmousemove=function(ev){
				        var oEv=ev||event;
				        var l = oEv.clientX-disX;
				        var t = oEv.clientY-disY;
				        if(l<0){
				        	l=0;
				        }
				        if(l>document.documentElement.clientWidth-oDiv.clientWidth){
				        	l = document.documentElement.clientWidth-oDiv.clientWidth;
				        }
				        if(t<0){
				        	t=0;
				        }
				        if(t>document.documentElement.clientHeight-oDiv.clientHeight){
				        	t = document.documentElement.clientHeight-oDiv.clientHeight;
				        }
				        
						oDiv.style.left=l+'px';
						oDiv.style.top=t+'px';

					}
					document.onmouseup=function(){
						document.onmousemove=null;
						document.onmouseup=null;
					}
					//firefox bug
					return false;
				}
			}
		</script>
	</head>
	<body>
		<div id="div1"></div>
	</body>
</html>
